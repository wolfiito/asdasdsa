{% extends 'oracion.html' %}

{% block head %}
{{ super() }}
<link rel="stylesheet" href="{{ url_for('static', filename='css/styleTareaActiva.css') }}">
{% endblock head %}


{% block contenido %}

<p class="d-inline-flex gap-1">
    <a class="btn btn-primary collapsed" data-bs-toggle="collapse" href="#collapseActivas" role="button"
        aria-expanded="false" aria-controls="collapseActivas">Peticiones de Oración</a>
    <button class="btn btn-primary collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#colapseNoActivas"
        aria-expanded="false" aria-controls="colapseNoActivas">Oraciones respondidas</button>
</p>
        <div class="collapse" id="collapseActivas">
            <div class="card card-body">
                <div class="contenedor-de-peticiones">
                    {% if tareas %}
                    {% if not tareas | selectattr('isActive', 'equalto', 'True') | list %}
                    <p>No hay tareas disponiblesasdsad.</p>
                    {% else %}
                    <div class="contenedor-peticiones">
                        {% for tarea in tareas %}
                        {% if tarea['isActive'] == "True" %}
                        <div class="contenedor-peticion">
                            <div class="peticion">
                                <div class="titulo">
                                    <h2>{{ tarea['titulo'] }}</h2>
                                </div>
                                <div class="botones">
                                    <ion-icon name="hand-right"></ion-icon>
                                    <ion-icon name="checkmark-circle" onclick="marcarCompleta('{{ loop.index }}')"></ion-icon>
                                    <ion-icon id="desc" name="chevron-forward-circle"
                                        onclick="toggleDescripcion(this)"></ion-icon>
                                </div>
                            </div>
                            <div class="descripcion">
                                {{ tarea['descripcion'] }}
                            </div>
                        </div>
                        {% endif %}
                        {% endfor %}
                    </div>
                    {% endif %}
                    {% else %}
                    <p>No hay tareas disponibles.</p>
                    {% endif %}
                </div>
            </div>

        <div class="collapse" id="collapseNo">
            <div class="card card-body">
                <div class="contenedor-de-peticiones">
                    {% if tareas %}
                    {% if not tareas | selectattr('isActive', 'equalto', 'False') | list %}
                    <p>Aún no hay información de oraciones respondidas</p>
                    {% else %}
                    <div class="contenedor-peticiones">
                        {% for tarea in tareas %}
                        {% if tarea['isActive'] == "False" %}
                        <div class="contenedor-peticion">
                            <div class="peticion">
                                <div class="titulo">
                                    <h2>{{ tarea['titulo'] }}</h2>
                                </div>
                                <div class="botones">
                                    <ion-icon id="desc" name="chevron-forward-circle" onclick="toggleDescripcion(this)"></ion-icon>
                                </div>
                            </div>
                            <div class="descripcion">
                                {{ tarea['descripcion'] }}
                                {{ tarea['testimonio'] }}
                                {{ tarea['fechaFinal']}}
                            </div>
                        </div>
                        {% endif %}
                        {% endfor %}
                    </div>
                    {% endif %}
                    {% else %}
                    <p>No hay tareas disponibles.</p>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>

{% endblock contenido %}


{% block script %}
{{ super() }}
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
    crossorigin="anonymous"></script>
<script type="module" src="https://cdn.jsdelivr.net/npm/@ionic/core/dist/ionic/ionic.esm.js"></script>
<script nomodule src="https://cdn.jsdelivr.net/npm/@ionic/core/dist/ionic/ionic.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@ionic/core/css/ionic.bundle.css" />
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="{{ url_for('static', filename='js/mostrarTareaActiva.js') }}"></script>
<link href="https://getbootstrap.com/docs/5.3/assets/css/docs.css" rel="stylesheet">
{% endblock script %}