{% extends 'oracion.html' %}

{% block head %}
{{ super() }}
<link rel="stylesheet" href="{{ url_for('static', filename='css/styleTareaActiva.css') }}">
{% endblock head %}


{% block contenido %}

    <ul class="nav nav-tabs" id="myTab" role="tablist">
        <li class="nav-item" role="presentation">
            <button class="nav-link active" id="peticiones-tab" data-bs-toggle="tab" data-bs-target="#peticionesActivas" type="button" role="tab" aria-controls="peticionesActivas" aria-selected="true">Peticiones Activas</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="respuestas-tab" data-bs-toggle="tab" data-bs-target="#respuestas" type="button" role="tab" aria-controls="respuestas" aria-selected="false">Peticiones Respondidas</button>
        </li>
        <!-- <li class="nav-item" role="presentation">
            <button class="nav-link" id="contact-tab" data-bs-toggle="tab" data-bs-target="#contact" type="button" role="tab" aria-controls="contact" aria-selected="false">Contact</button>
        </li> -->
    </ul>

    <div class="tab-content" id="myTabContent">
        <div class="tab-pane fade show active" id="peticionesActivas" role="tabpanel" aria-labelledby="peticiones-tab">
            <div class="contenedor-de-peticiones">
                {% if tareas %}
                    {% if not tareas | selectattr('isActive', 'equalto', 'True') | list %}
                        <p>No hay tareas disponiblesasdsad.</p>
                    {% else %}
                        <div class="contenedor-peticiones">
                            {% for tarea in tareas %}
                                {% if tarea['isActive'] == "True" %}
                                    <div class="contenedor-peticion">
                                        <div class="peticion">
                                            <div class="titulo">
                                                <h2>{{ tarea['titulo'] }}</h2>
                                            </div>
                                            <div class="botones">
                                                <ion-icon name="hand-right" onclick="sumarOracion('{{ loop.index }}')"></ion-icon>
                                                {% if rol == 'Admin'  %}
                                                    <ion-icon name="checkmark-circle" onclick="marcarCompleta('{{ loop.index }}')"></ion-icon>
                                                {% endif %}
                                                <ion-icon id="desc" name="chevron-forward-circle"
                                                onclick="toggleDescripcion(this)"></ion-icon>
                                            </div>
                                        </div>
                                        <div class="descripcion">
                                            {{ tarea['descripcion'] }}
                                        </div>
                                    </div>
                                {% endif %}
                            {% endfor %}
                        </div>
                    {% endif %}
                {% else %}
                    <p>No hay tareas disponibles.</p>
                {% endif %}
            </div>
        </div>
        <div class="tab-pane fade" id="respuestas" role="tabpanel" aria-labelledby="respuestas-tab">
            <div class="contenedor-de-peticiones">
                {% if tareas %}
                    {% if not tareas | selectattr('isActive', 'equalto', 'False') | list %}
                        <p>No hay oraciones respondidas</p>
                    {% else %}
                        <div class="contenedor-peticiones">
                            {% for tarea in tareas %}
                                {% if tarea['isActive'] == "False" %}
                                    <div class="contenedor-peticion">
                                        <div class="peticion">
                                                <div class="titulo">
                                                    <h2>{{ tarea['titulo'] }}</h2>
                                                </div>
                                            <div class="botones">
                                                <ion-icon id="desc" name="chevron-forward-circle"
                                                onclick="toggleDescripcion(this)"></ion-icon>
                                            </div>
                                        </div>
                                        <div class="descripcion">
                                            <strong>Descripción: </strong>{{ tarea['descripcion'] }} <br>
                                            <strong>Fecha de inicio: </strong>{{ tarea['fechaInicio'] }} <br>
                                            <strong>Fecha de respuesta: </strong>{{ tarea['fechaFinal'] }} <br>
                                            <strong>Testimonio: </strong>{{ tarea['testimonio'] }} <br>
                                            <strong>El número de veces que alguien oro por esta petición fue de: </strong>{{ tarea['total'] }}
                                        </div>
                                    </div>
                                {% endif %}
                            {% endfor %}
                        </div>
                    {% endif %}
                {% else %}
                    <p>No hay tareas disponibles.</p>
                {% endif %}
            </div>
        </div>
        <!-- <div class="tab-pane fade" id="contact" role="tabpanel" aria-labelledby="contact-tab">
            <h2>Agregar Motivo de Oración</h2>

            <form id="formMotivoOracion">
                <label for="titulo">Título:</label>
                <input type="text" id="titulo" name="titulo" required>
                <br>

                <label for="descripcion">Descripción:</label>
                <textarea id="descripcion" name="descripcion" required></textarea>
                <br>

                <button type="button" onclick="agregarMotivoOracion()">Agregar Motivo de Oración</button>
            </form>
        </div>
    </div> -->

{% endblock contenido %}


{% block script %}
{{ super() }}
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
        crossorigin="anonymous"></script>
    <script type="module" src="https://cdn.jsdelivr.net/npm/@ionic/core/dist/ionic/ionic.esm.js"></script>
    <script nomodule src="https://cdn.jsdelivr.net/npm/@ionic/core/dist/ionic/ionic.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@ionic/core/css/ionic.bundle.css" />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{{ url_for('static', filename='js/mostrarTareaActiva.js') }}"></script>
    <link href="https://getbootstrap.com/docs/5.3/assets/css/docs.css" rel="stylesheet">
{% endblock script %}